<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <title>Yasic by sivizius</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>Yasic</h1>
        <h2>yet another symbolic instruction code - transcompiler to flatassembly, written in fasm-macros</h2>

        <section id="downloads">
          <a href="https://github.com/sivizius/yasic/zipball/master" class="btn">Download as .zip</a>
          <a href="https://github.com/sivizius/yasic/tarball/master" class="btn">Download as .tar.gz</a>
          <a href="https://github.com/sivizius/yasic" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <h1>
<a id="about" class="anchor" href="#about" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>about</h1>

<p>yet another symbolic instruction code is a programming language and transcompiler to flatassembly, which is written entirely in the macro-language of <a href="http://flatassembler.net/">flatassembler</a>, so do not worry if it is slowly (about 0.9s for the provided example). This is the nature of interpreted languages :-/</p>

<p>Nevertheless it is awes0me.</p>

<h1>
<a id="getting-started" class="anchor" href="#getting-started" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Getting started</h1>

<p>First of all some terms should be defined:</p>

<ul>
<li>»source« or »code«: the code you write in yasic</li>
<li>»output«: the output this compiler produce or the compiled form of it</li>
<li>»input«: the input for your compiled program</li>
</ul>

<p>A source file must start with this header:</p>

<pre><code>#!sba:yasic
</code></pre>

<p>and a newline character.</p>

<p>Then you could write some code, e.g.:</p>

<pre><code>label
{
  'hello world'
  {
    #print some text
    echo('hello my friend')
    jump('label')
  }
}
</code></pre>

<p><code>label {}</code> defines a new label in the output. You could refer to it e.g. with <code>jump('label')</code>, which creates <code>jmp label</code> in the output. After a label a block (<code>{ [...] }</code>) have to follow.</p>

<p>To compare the input with a regular expression, you could use <code>'something' {}</code>. This compares the input with the string »something«. If this comparison is true, the block would be executed, if not, the output jumps to the end of the block. I go into detail later.</p>

<p>If you just want to remark or just do not want something in the output, you could use comments:</p>

<pre><code>#comment from »#« to the end of the line.
</code></pre>

<p>There are also some predefined functions like <code>echo('text')</code> to let the output call an echo-function to print <em>'text'</em> or <code>jump('label')</code> to jump to <em>label</em>.
The end of a function-call is a <code>;</code> or a newline character, so if you want everything on one line, you have to use <code>;</code> at the end:</p>

<pre><code>'hello world' { echo('hello my friend'); }
</code></pre>

<p>It is time to compile this piece of code!
Yasic is written in flatassembler so you need to <a href="http://flatassembler.net/download.php">download</a> it, if not already done so far.
I also provided an <a href="https://github.com/sivizius/yasic/blob/master/sba.sh">shell-script</a>, but you could compile your source with:</p>

<div class="highlight highlight-source-shell"><pre>fasm -m 128000 <span class="pl-s"><span class="pl-pds">"</span>yasic.fcfg<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span>output.fasm<span class="pl-pds">"</span></span></pre></div>

<p>But before you compile <code>yasic.fcfg</code>, you need to adjust the name of your source-file in this line of <a href="https://github.com/sivizius/yasic/blob/master/yasic.fcfg"><code>yasic.fcfg</code></a>:</p>

<pre><code>yasic_parse 'source-file.sba'
</code></pre>

<p>There are some examples in the <em>code</em>-directory.</p>

<p>There are also some other options for the compiler in this file:</p>

<ul>
<li>to define the name of the echo-function in output:</li>
</ul>

<pre><code>yasic.OpEcho          equ 'echo_put'
</code></pre>

<ul>
<li>jump here, if the input does not match:</li>
</ul>

<pre><code>yasic.FailSafe        equ 'fail_safe'
</code></pre>

<ul>
<li>call this to get a new character:</li>
</ul>

<pre><code>yasic.GetChar         equ 'qword [ files.getChar ]'
</code></pre>

<ul>
<li>if <code>echo</code> should called like this: <code>echo_put qword [ msg_0000000000000000 ]</code>, set this option</li>
</ul>

<pre><code>yasic.IndirectString  equ false
</code></pre>

<ul>
<li>set the structure of strings (e.g. <code>db</code>):</li>
</ul>

<pre><code>yasic.Symbol          equ 'symbol'
</code></pre>

<ul>
<li>where is the return-value of getChar? (e.g. <code>rax</code>)</li>
</ul>

<pre><code>yasic.TheChar         equ 'my_char'
</code></pre>

<ul>
<li>if this option is true, the output is smaller, but less readable</li>
</ul>

<pre><code>yasic.MagicNumbers    equ false
</code></pre>

<ul>
<li>set the indentation (not the indentation-size!)</li>
</ul>

<pre><code>yasic.Depth           equ 0
</code></pre>

<h1>
<a id="regular-expressions" class="anchor" href="#regular-expressions" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Regular Expressions</h1>

<p>Well, the regex I used in yasic are similar to PCRE, but not the same!
Yasic does not support quantifiers yet, character-classes and ranges are a bit different and groups are only implemented very thin.
To define a regular expression you just had to write:</p>

<pre><code>'regex' {}
</code></pre>

<p>Yasic supports the wildcard <code>.</code> for any character and escape sequences for some special characters and even some character-classes with <code>\</code>:</p>

<pre><code>'regex..\.\W\n' {}
</code></pre>

<p>To compare the input with a class of characters, you just put the name of the class in <code>&lt;</code> and <code>&gt;</code>:</p>

<pre><code>'&lt;alnum&gt;&lt;A&gt;&lt;B&gt;&lt;C&gt;' {}
</code></pre>

<p>If you just put one character into this brackets, e.g. <code>&lt;A&gt;</code>, the regular expression match <em>a</em> and <em>A</em>, if you do not put them into brackets, the regex is case-sensitive!</p>

<p>To define a range, you have to put the start and the end into <code>[</code> and <code>]</code>:</p>

<pre><code>'[09][AZ|az]' {}
</code></pre>

<p>This also allows multiple ranges, seperated with <code>|</code>, so this regular expression match <em>1a</em>, <em>9Z</em>, but not <em>a9</em>.
But note that the characters must be sorted to their ascii values!
This would match <em>A</em>, <em>Z</em>, but never <em>0</em>:</p>

<pre><code>'[AZ|09]' {}
</code></pre>
      </section>
    </div>

    
  </body>
</html>
